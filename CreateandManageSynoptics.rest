.. _CreateandManageSynoptics:

Create & Manage Synoptic Views
==============================

In IBEX, synoptic views provide you with interactive, schematic views of your instrument.  Each icon on a synoptic view represents a device attached to your instrument.  You can tailor the synoptic view to display key PVs next to the device icons.   By double-clicking on an item, you can drill down to see more detail.

You can define as many synoptic views as you wish for your instrument.  

A synoptic need not encompass the whole instrument.  You can define synoptic views that focus on specific aspects of your instrument - for example, just the beam optics, or just the sample stack and equipment mounted on the sample stack.

You can also associate a synoptic view with a particular configuration, so that, in effect, the chosen synoptic becomes the default synoptic for that configuration.

Creating a Synoptic View
------------------------

To create a synoptic view:

#. Select ``New`` from the ``Synoptic`` menu.
#. IBEX displays the New Synoptic dialog, which is divided into four panes.  

   #. Instrument Tree
   #. Component Details
   #. Component  Target Details
   #. PV Details

#. At the bottom of the dialog are three buttons

Synoptic Preview
   Click on the ``Synoptic Preview`` button to get a preview of how your synoptic will appear.  You can click on the ``Synoptic Preview`` button at any time.

Save as...
   Click on the ``Save as...`` button to save your changes.  You must provide a name for the synoptic view.  The name of the synoptic can contain only the characters a-z, A-Z, 0-9 and _ (underscore).  The name must also start with a character.

Cancel
   Click on the ``Cancel`` button to exit the dialog without saving your changes.

**Please note:** After exiting the New Synoptic dialog, you will need explicitly select the synoptic you have just created in order to see it displayed in the synoptic display area.

Use the New Synoptic dialog as follows:

#. Click on the ``Add Component`` button to add a new component to the Instrument Tree.

   #. When you add a new component, its details are shown in the Component Details pane.  It is given the default name ``New Component`` and a default type of ``UNKNOWN``.  
   #. In the Component Details pane, you can adjust the general properties of the component.

      * Give it a suitable name
      * Select the type of device it represents.  Click on the drop-down menu to select the device type.
      * Click on the ``Add New PV`` button to add blocks or PVs to be associated with the component (remember - blocks are just aliases to PVs).  Any blocks or PVs you select will be displayed below the component in the synoptic view.
      * Remove any blocks or PVs previously associated with the component.
      * You can change the order of components in the synoptic view by dragging & dropping any component to the desired position.  As you drag a component, a black line will appear to indicate the you can drop the component and it will be positioned between the two components immediately above and below the black line.  If you drop a component on top of another component, it will be positioned as "sub-component".  "Sub-components" are useful if you have several components that are grouped together as a composite unit.

   #. If you add an associated block or PV (using the ``Add New PV`` button), its details appear in the PV Details pane.  Use the the ``Select Block`` or ``Select PV`` buttons to choose a specific block or PV to associated with the component.

   #. Use the Component Target Details pane to adjust the specific properties of the component (e.g. which model of device the component represents, which component properties are needed).

      * The ``Name:`` field is a drop-down menu.  Select the name/model of the device.  Some names on the list refer to general classes of device (e.g. ``Eurotherm`` refers to all Eurotherm temperature controllers); other names refer to specific models (e.g. ``Julabo FP300`` refers to a specific model of Julabo water bath).  Whether a name is general or specific depends on whether the manufacturer of the device has chosen a common interface to all models of a device or interfaces that are unique to individual models.  When you have made your selection, a short description of the component will be displayed in the ``Description:`` field.
      * If you are not sure which name/model to select for the ``Name:`` field, click on the ``Default Target`` button.  IBEX will then display a list of names/models filtered by the Component Type field (see Component Details pane).  This will significantly reduce the size of the list (often there will be only one choice).  Choose the most appropriate name/model.
      * Clicking on the ``Clear Target`` button will clear any selection in the ``Name:`` field.
      * Below the ``Description:`` field is a table of ``Properties:``, which lists the properties belonging to the selected component.  Each property has a name and a value.  Select each property in turn to edit the value.
      * On selecting a property, the value of the property will  appear ``Value:`` field.  A description of the value is provided in the ``Description:`` field below the ``Value:`` field.  The default value might be blank.
      * Set the property value.   
      * **Please note:** Component properties are very specific to individual devices - it is impractical to give definitive advice in a user manual on the correct value for a component property.  The  ``Description:`` field will provide general advice on the type of value to be entered in the ``Value:`` field.  If you are unsure about the correct value to choose, please consult with the Experimental Controls team.

#. Click on the ``Copy Component`` button to duplicate the currently selected component.  If no component is selected, the ``Copy Component`` button is inactive.

#. Click on the ``Delete Component`` button to delete the currently selected component.  If no component is selected, the ``Delete Component`` button is inactive.

#. Toggle the ``Show Beam`` check-box to show or hide the schematic representation of the beam in the synoptic view.  By default, the beam will be shown.

Editing a Synoptic View
------------------------

Editing a synoptic view is similar to creating a synoptic view, except that you are working from an existing synoptic:

#. Select ``Edit`` from the ``Synoptic`` menu.
#. IBEX displays the Edit Synoptic dialog, which lists all the synoptics defined for your instrument.
#. Choose a synoptic from the list and press the ``OK`` button.
#. IBEX then displays the Edit Synoptic dialog.
#. This time the Edit Synoptic dialog has three buttons at the bottom of the dialog.

Save
   Clicking on the ``Save`` button immediately saves your changes without any further prompting.  

Save as...
   Clicking on the ``Save as...`` button operates as described in the previous section.  You can use the ``Save as...`` button to save the synoptic with a new name, prior to making further changes.

Cancel
   Click on the ``Cancel`` button to exit the Edit Synoptic dialog without saving your changes. 

**Please note:** After exiting the Edit Synoptic dialog, you might need to click on the ``Refresh Synoptic`` button at the top of the synoptic display area to see the changes you have made.

Using the Edit Synoptic dialog is the same as the New Synoptic dialog (as described in `
Creating a Synoptic View`_).

Deleting a Synoptic View
------------------------

To delete a synoptic:

#. Select ``Delete`` from the ``Synoptic`` menu.
#. IBEX displays the Delete Synoptic dialog, which lists all the synoptics defined for your instrument.
#. Select a synoptic from the list and press the ``OK`` button
#. IBEX deletes the selected synoptic.

**Note 1:** If you try to delete the current synoptic, IBEX will indeed delete it (you might have to click the ``Refresh Synoptic`` button to see that IBEX really has deleted the current synoptic).

**Note 2:** When you delete a synoptic it really is deleted.  It is no longer available to be used by IBEX. Before deleting a synoptic , please be sure that you really do want to delete it.  If you unintentionally delete a synoptic, please contact the Experimental Controls team - it may be possible to recover the deleted synoptic.