

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Error Checking Troubleshooting &mdash; IBEX User Manual</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=9f04a737" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Genie Python Training Course" href="Genie-Python-Training.html" />
    <link rel="prev" title="Creating &amp; Running Scripts" href="Creating-and-Running-Scripts.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >

          
          
          <a href="../index.html" class="icon icon-home">
            IBEX User Manual
              <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Key-Concepts-in-IBEX.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../IBEX-GUI-Features.html">IBEX GUI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Scripting.html">Scripting</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Alerts-on-Blocks.html">Alerts on Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="Block-names-helper.html">Block Names Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="Creating-and-Running-Scripts.html">Creating &amp; Running Scripts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Error Checking Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="Genie-Python-Training.html">Genie Python Training Course</a></li>
<li class="toctree-l2"><a class="reference internal" href="Matplotlib.html">Matplotlib</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pre-and-Post-Command-Hooks.html">Pre &amp; Post-command Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="Simulating-Scripts.html">Simulating Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="The-Scripting-Console.html">The Scripting Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tips-and-Examples.html">Tips &amp; Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="genie_python-Commands.html">Genie Python Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Script-Generator.html">Script Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../The-Web-Dashboard.html">Web Dashboard</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../How-To.html">How do I …?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IBEX-File-Paths-page.html">Where is …?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Instrument-Specific-Guidance.html">Instrument-specific guidance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Device-Specific-Guidance.html">Device-specific guidance</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBEX User Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../Scripting.html">Scripting</a></li>
      <li class="breadcrumb-item active">Error Checking Troubleshooting</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ISISComputingGroup/ibex_user_manual/blob/master/doc/scripting/Error-Checking-Troubleshooting.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="error-checking-troubleshooting">
<h1>Error Checking Troubleshooting<a class="headerlink" href="#error-checking-troubleshooting" title="Link to this heading"></a></h1>
<section id="pylint">
<h2>Pylint<a class="headerlink" href="#pylint" title="Link to this heading"></a></h2>
<p>Scripts are now “linted” on load, which means they are checked for validity against a variety of conditions. This means that more mistakes in the code can be caught before the script is run. The script is linted on load and if there are issues the output from <cite>g.load_script</cite> will look something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">W</span><span class="p">:</span>  <span class="mi">2</span><span class="p">:</span> <span class="n">Found</span> <span class="n">indentation</span> <span class="k">with</span> <span class="n">tabs</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">spaces</span> <span class="p">(</span><span class="n">mixed</span><span class="o">-</span><span class="n">indentation</span><span class="p">)</span>
<span class="n">E</span><span class="p">:</span>  <span class="mi">4</span><span class="p">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="kn">import</span><span class="w"> </span><span class="s1">&#39;my_file_in_inst&#39;</span> <span class="p">(</span><span class="n">import</span><span class="o">-</span><span class="n">error</span><span class="p">)</span>
</pre></div>
</div>
<p>Where the initial <em>W:</em> indicates a warning or <em>E:</em> indicates an error and the number is the line number in the script.</p>
<p>If loading a script produces warnings only, it will still be loaded successfully and can be used thereafter, whereas any errors will prevent a script from being loaded altogether.</p>
<p>We do provide the option to disable linting by setting the check_script argument to false, i.e.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">load_script</span><span class="p">(</span><span class="s2">&quot;some_script.py&quot;</span><span class="p">,</span> <span class="n">check_script</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>However, doing this is at your own discretion and with the understanding that you are exposing yourself to issues, either immediately or further down the line. We recommend fixing issues in scripts before running it.</p>
<p>We have found that there are some common warnings and errors which we have listed below with suggestions of what might be wrong. If you find something that is not included let us know and we can add it to this page to help others.</p>
<section id="errors">
<h3>Errors<a class="headerlink" href="#errors" title="Link to this heading"></a></h3>
<p><strong>Unable to import ‘file_in_inst’ (import-error)</strong></p>
<p>This happens when the script contains something like</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">file_in_inst</span><span class="w"> </span><span class="kn">import</span> <span class="n">my_function</span>
</pre></div>
</div>
<p>where <em>file_in_inst</em> is a file in your <em>NDX/Python/inst</em> directory, such as <em>inst_routines</em>
This may work at the command line but does not work with the checker/linter. A better way of writing this is</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">inst.file_in_inst</span><span class="w"> </span><span class="kn">import</span> <span class="n">my_function</span>
</pre></div>
</div>
<p>The checker does not know of this special case of allowing <cite>inst</cite> modules on the command line unprefixed.</p>
<p><strong>Undefined variable `g` or `inst`</strong></p>
<p>You need to add the following lines to the top of your user script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">genie_python</span><span class="w"> </span><span class="kn">import</span> <span class="n">genie</span> <span class="k">as</span> <span class="n">g</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">inst</span>
</pre></div>
</div>
<p>This is so that the linter knows what is being referenced when you call functions on the g or inst modules.</p>
<p><strong>Undefined variable &lt;variable_name&gt;…</strong></p>
<p>If &lt;variable_name&gt; is a genie_python or instrument script function that you are trying to use then there are two options.</p>
<p>You can add the following lines to the top of your script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">genie_python</span><span class="w"> </span><span class="kn">import</span> <span class="n">genie</span> <span class="k">as</span> <span class="n">g</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">inst</span>
</pre></div>
</div>
<p>You will then need to replace &lt;variable_name&gt; with g.&lt;variable_name&gt; or inst.&lt;variable_name&gt; in your script.</p>
<p>Alternatively import the functions directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">genie_python.genie</span><span class="w"> </span><span class="kn">import</span> <span class="o">&lt;</span><span class="n">variable_name</span><span class="o">&gt;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">inst</span><span class="w"> </span><span class="kn">import</span> <span class="o">&lt;</span><span class="n">variable_name</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="warnings">
<h3>Warnings<a class="headerlink" href="#warnings" title="Link to this heading"></a></h3>
<p><strong>Found indentation with tabs instead of spaces (mixed-indentation)</strong></p>
<p>Here the script file you are loading contains both spaces and tabs. This can upset the python interpreter although this is usually caught on import; we recommend using spaces for indent.</p>
<p>If you are using Notepad++ as your editor it can be made to use spaces instead of tabs when you press tab. This is done by</p>
<ol class="arabic simple">
<li><p>Select from the menu bar Settings -&gt; Preferences.</p></li>
<li><p>Select Language in the left-hand box</p></li>
<li><p>In “Tab Settings” box select “python”</p></li>
<li><p>Untick “Use default value” and tick “Replace by space”.</p></li>
</ol>
<p><strong>Unused import XXXX from wildcard import (unused-wildcard-import)</strong></p>
<p>Although wildcard imports are not recommended because of the possibility of name collisions if you want to use it the linter will give you lots of warning about anything you didn’t use from the package. To disable these warnings place the following comment on the import line which will suppress these warnings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">XXXX</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>  <span class="c1"># pylint: disable=unused-wildcard-import</span>
</pre></div>
</div>
<p>You will still get a warning about wildcards which is good but not the warning about unused methods.</p>
</section>
</section>
<section id="new-pyright">
<h2>New: Pyright<a class="headerlink" href="#new-pyright" title="Link to this heading"></a></h2>
<p>As well as being ‘linted’, scripts are now checked against Pyright on load. This means that there will be fewer errors during runtime, as they will be caught when the script is being loaded. This is beneficial as it means that if your script has an inherent problem that could affect your equipment and you try to load and run it, it is more likely now that IBEX will not let your script be run. However, this may also mean that scripts that once worked may not anymore.</p>
<section id="why-pyright">
<h3>Why Pyright?<a class="headerlink" href="#why-pyright" title="Link to this heading"></a></h3>
<p>Pyright is a static type checker for Python. It helps ensure that your code is type-safe and adheres to the type annotations you’ve provided. By integrating Pyright into the script checking process, we aim to catch more errors at the time of script loading, reducing the likelihood of runtime errors that could cause issues with your equipment or experiments.</p>
</section>
<section id="implications-for-current-and-future-scripts">
<h3>Implications for Current and Future Scripts<a class="headerlink" href="#implications-for-current-and-future-scripts" title="Link to this heading"></a></h3>
<p>Current Scripts: Scripts that previously loaded without errors may now produce errors due to type inconsistencies or other issues that Pyright detects. These scripts will need to be updated to resolve these issues before they can be loaded and run successfully.
Future Scripts: When writing new scripts, it is good to pay closer attention to adding type annotations. This will help avoid errors when the script is loaded. Note that Pyright errors will take the same format as the previously mentioned Pylint errors, but will be preceded by a [PR] representing Pyright.
Examples of Common Pyright Errors
Here are some examples of scripts that may not have produced load-time errors before but will now do so due to Pyright’s checks.</p>
<p><strong>Example 1: Invalid Range</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">wrong</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">):</span> <span class="c1"># Invalid range. Upper bound should be an integer.</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p><em>[PR] E: 2: Argument of type “float” cannot be assigned to parameter “stop” of type “SupportsIndex” in function “__new__”</em></p>
<p><strong>Example 2: Incompatible Type Assignment</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.4</span> <span class="c1"># Python is being told c is either an int or a float of value 3.4.</span>
<span class="n">c</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># c is defined as nothing. So Pyright throws error.</span>
</pre></div>
</div>
<p><em>[PR] E: 2: Expression of type “None” is incompatible with declared type “int | float”</em></p>
<p><strong>Example 3: Incorrect Argument Types</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">genie_python</span><span class="w"> </span><span class="kn">import</span> <span class="n">genie</span> <span class="k">as</span> <span class="n">g</span>
<span class="k">def</span><span class="w"> </span><span class="nf">wrong</span><span class="p">():</span>
    <span class="n">g</span><span class="o">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">)</span> <span class="c1"># Correct number of arguments but of wrong type.</span>
</pre></div>
</div>
<p><em>[PR] E: 3: Argument of type “Literal[3]” cannot be assigned to parameter “meas_type” of type “str” …</em></p>
</section>
<section id="using-type-annotations">
<h3>Using Type Annotations<a class="headerlink" href="#using-type-annotations" title="Link to this heading"></a></h3>
<p>Type annotations in Python allow you to explicitly declare the expected data types of variables, function arguments, and return values. This helps in catching type-related errors early and improves the readability and maintainability of your code. Here’s a brief guide on how to use type annotations effectively:</p>
<section id="function-arguments-and-return-types">
<h4>Function Arguments and Return Types<a class="headerlink" href="#function-arguments-and-return-types" title="Link to this heading"></a></h4>
<p>You can specify the types of function arguments and return values using type hints.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">!&quot;</span>
</pre></div>
</div>
<p>In this example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name:</span> <span class="pre">str</span></code> indicates that the name parameter should be of type str (string).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-&gt;</span> <span class="pre">str</span></code> indicates that the function returns a str.</p></li>
</ul>
</section>
<section id="complex-types">
<h4>Complex Types<a class="headerlink" href="#complex-types" title="Link to this heading"></a></h4>
<p>For more complex types, such as lists, dictionaries, or custom objects, you can use annotations from the typing module.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span>

<span class="n">numbers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">person</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mi">175</span><span class="p">}</span>
</pre></div>
</div>
<p>In this example:</p>
<ul class="simple">
<li><p><em>numbers</em> is annotated as a list of integers <code class="docutils literal notranslate"><span class="pre">List[int]</span></code>.</p></li>
<li><p><em>person</em> is annotated as a dictionary with string keys and integer values <code class="docutils literal notranslate"><span class="pre">Dict[str,</span> <span class="pre">int]</span></code>.</p></li>
</ul>
</section>
</section>
</section>
<section id="what-do-i-do-if-i-can-t-fix-my-pyright-error">
<h2>What do I do if I can’t fix my Pyright error??<a class="headerlink" href="#what-do-i-do-if-i-can-t-fix-my-pyright-error" title="Link to this heading"></a></h2>
<p>&gt; If it is just the one line that is causing an issue then you can always write a “# type: ignore” at the end of the line to have it ignored by Pyright.</p>
<p>&gt; If all else fails, when you make a call to <code class="docutils literal notranslate"><span class="pre">g.load_script('script.py')</span></code>, you can add a second argument to disable linting and type checking as follows: <code class="docutils literal notranslate"><span class="pre">g.load_script('script.py',</span> <span class="pre">check_script=False)</span></code></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Creating-and-Running-Scripts.html" class="btn btn-neutral float-left" title="Creating &amp; Running Scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Genie-Python-Training.html" class="btn btn-neutral float-right" title="Genie Python Training Course" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">Last updated on Sep 01, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>